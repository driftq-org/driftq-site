---
title: Metrics
description: Prometheus metrics exposed by DriftQ-Core.
---

<div className="space-y-10">

  {/* Intro */}
  <section className="space-y-4">
    <p className="m-0">
      DriftQ-Core exposes <code>/metrics</code> in <strong>Prometheus</strong> text format.
      Use it to monitor reliability, lag, and backpressure in real time.
    </p>

    <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 dark:border-white/10 dark:bg-white/5">
      <p className="m-0">
        <strong>Endpoint:</strong> <code>GET /metrics</code>
      </p>
    </div>
  </section>

  {/* Core metrics */}
  <section className="space-y-5">
    <h2 className="m-0">Core metrics</h2>

    <div className="space-y-3">

      <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 text-zinc-900 dark:border-white/10 dark:bg-white/5 dark:text-zinc-100">
        <div className="font-semibold">
          <code>inflight_messages{"{topic,group,partition}"}</code>
        </div>
        <div className="mt-1 text-sm text-zinc-700 dark:text-zinc-300">
          Current number of leased (in-flight) messages.
        </div>
      </div>

      <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 text-zinc-900 dark:border-white/10 dark:bg-white/5 dark:text-zinc-100">
        <div className="font-semibold">
          <code>consumer_lag{"{topic,group,partition}"}</code>
        </div>
        <div className="mt-1 text-sm text-zinc-700 dark:text-zinc-300">
          Messages remaining after the committed offset (how far behind the group is).
        </div>
      </div>

      <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 text-zinc-900 dark:border-white/10 dark:bg-white/5 dark:text-zinc-100">
        <div className="font-semibold">
          <code>dlq_messages_total{"{topic,reason}"}</code>
        </div>
        <div className="mt-1 text-sm text-zinc-700 dark:text-zinc-300">
          Total number of messages routed to DLQ, labeled by reason.
        </div>
      </div>

      <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 text-zinc-900 dark:border-white/10 dark:bg-white/5 dark:text-zinc-100">
        <div className="font-semibold">
          <code>produce_rejected_total{"{reason}"}</code>
        </div>
        <div className="mt-1 text-sm text-zinc-700 dark:text-zinc-300">
          Total rejected produce attempts due to backpressure / overload (labeled by reason).
        </div>
      </div>

    </div>
  </section>

  {/* Quick usage */}
  <section className="space-y-4">
    <h2 className="m-0">Quick usage</h2>

    <pre className="not-prose m-0 overflow-x-auto whitespace-pre rounded-2xl border !border-black/10 !bg-black/5 px-4 py-3 font-mono text-sm leading-relaxed !text-zinc-900 dark:!border-white/10 dark:!bg-white/5 dark:!text-zinc-100">
      <code className="!bg-transparent !p-0 !text-inherit">{`# view everything
curl -s "http://localhost:8080/metrics"

# quick filters (Windows)
curl -s "http://localhost:8080/metrics" | findstr consumer_lag

# quick filters (macOS/Linux)
curl -s "http://localhost:8080/metrics" | grep consumer_lag`}</code>
    </pre>

    <div className="rounded-2xl border border-black/10 bg-black/5 px-4 py-3 dark:border-white/10 dark:bg-white/5">
      <p className="m-0">
        <strong>Tip:</strong> Alert on sustained lag growth and DLQ increases â€” those usually mean real production issues.
      </p>
    </div>
  </section>

</div>
